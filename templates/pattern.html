<!DOCTYPE HTML>
  <html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <title>Libra</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/main.css' %}" type="text/css">
  </head>
  <body>

    <div class="container" style="margin-top: 5px; margin-bottom: 5px;">
      <nav class="navbar navbar-expand-sm bg-default navbar-light">
        <a class="navbar-brand" href="/"><h1>Libra</h1></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <ul class="navbar-nav ml-auto text-right">
            <li class="nav-item">
              {% if user.is_authenticated %}

                <a href="/accounts/logout/">

                  {% else %}
                  <a href="/accounts/login/">

              {% endif %}
                <button type="button" class="btn">
                  <img class="login_img" src="https://img.icons8.com/ios/64/000000/gender-neutral-user.png" width="20px"/>
                  {% if user.is_authenticated %}

                    {{ user }}

                  {% else %}
                    Войти

                  {% endif %}
                </button>
              </a>
            </li>
            <li class="nav-item">
              <a href="/accounts/register/">
                <button type="button" class="btn">
                  <img class="registrarion_img" src="https://img.icons8.com/ios/32/000000/add-user-male.png" width="20px"/>
                  Регистрация
                </button>
              </a>
            </li>
            <li>
              <button type="button" class="btn">
                <div class="theme-switch-wrapper">
                  <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                  </label>
                </div>
              </button>
            </li>
            </ul>
        </div>  
      </nav>
    </div>

      <div class="container" style="margin-top: 5px; margin-bottom: 5px; padding: 10px;">
        {% block content %}
        
        {% endblock %}
      </div>

      <div class="container text-center">
        <p>© Электронная информационно-библиотечная система, 2020-2020. Контактный e-mail: Lobanovka@studklg.ru |
        <a href="/help/">Авторам и правообладателям</a></p>
      
      </div>


      <script>
        const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');

        function switchTheme(e) {
            if (e.target.checked) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
            else {
                document.documentElement.setAttribute('data-theme', 'light');
            }    
        }

        toggleSwitch.addEventListener('change', switchTheme, false);

        function switchTheme(e) {
            if (e.target.checked) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark'); //add this
            }
            else {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light'); //add this
            }    
        }

        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);

            if (currentTheme === 'dark') {
                toggleSwitch.checked = true;
            }
        }
      </script>


  <script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
  </body>
  </html>
